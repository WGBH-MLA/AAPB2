<%= 
  @pbcore.media_srcs.map do |media_src|
    media = @pbcore.video? ? 'video' : 'audio'
    content_tag(media,
                id: 'player-media',
                controls: true,
                oncontextmenu: 'return false;', 
                preload: 'none', width: AAPB::PLAYER_WIDTH, height: AAPB::PLAYER_HEIGHT,
                crossorigin: 'with-credentials',
                poster: @pbcore.img_src) do %>

      <source src="<%= media_src %>" type='<%= @pbcore.video? ? 'video/mp4' : 'audio/mp3' %>' />

      <% if @pbcore.captions_src %>    
        <track kind="captions" src="/transcripts/<%= @pbcore.id %>.vtt" srclang="en" label="English" default></track>
      <% end %>
        
      <%
    end
  end.join().html_safe()
%>

<%= 
  tag('iframe', 
    src: "/transcripts/#{@pbcore.id}",
    id: 'transcript',
    width: AAPB::PLAYER_WIDTH,
    height: AAPB::PLAYER_HEIGHT.to_i / 2,
    frameBorder: 0
  ) if params[:transcript]
%>